<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petrobras - Análise de Biofouling</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="analise-data.js"></script>
    <script src="analise-charts.js"></script>
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <img src="petrobras-logo.png" alt="Petrobras">
        </div>
        <nav class="nav-menu-center">
            <a href="index.html" class="nav-item">
                <span class="material-icons">home</span>
            </a>
            <a href="navios.html" class="nav-item active">
                <span class="material-icons">directions_boat</span>
            </a>
            <a href="#" class="nav-item">
                <span class="material-icons">chat</span>
            </a>
        </nav>
        <nav class="nav-menu-bottom">
            <a href="#" class="nav-item">
                <span class="material-icons">settings</span>
            </a>
            <a href="#" class="nav-item">
                <span class="material-icons">logout</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Header -->
        <header class="header">
            <h1 class="page-title">Análise de Biofouling</h1>
            <div class="header-actions">
                <div class="search-bar">
                    <span class="material-icons search-icon">search</span>
                    <input type="text" id="searchInput" placeholder="Pesquise por data ou sessão">
                </div>
                <button class="notification-btn">
                    <span class="material-icons">notifications_none</span>
                </button>
                <div class="user-avatar">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%234D4D4D'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-weight='bold' font-size='16'%3EU%3C/text%3E%3C/svg%3E"
                        alt="User">
                </div>
            </div>
        </header>

        <!-- Analysis Content -->
        <main class="content">
            <!-- ML Model Info Banner -->
            <section class="ml-info-banner">
                <div class="ml-info-content">
                    <div class="ml-info-icon">
                        <span class="material-icons">psychology</span>
                    </div>
                    <div class="ml-info-text">
                        <h3>Análise por Machine Learning</h3>
                        <p>Os dados abaixo foram gerados por nosso modelo de machine learning treinado para detectar biofouling em navios. 
                           Navio analisado: <strong id="shipNameDisplay">-</strong> | 
                           Total de eventos: <strong id="totalEventsDisplay">-</strong> | 
                           Período: <strong id="periodDisplay">-</strong></p>
                    </div>
                </div>
            </section>

            <!-- Summary Statistics -->
            <section class="highlights-section">
                <div class="section-header">
                    <h2>Resumo do Impacto</h2>
                </div>
                <div class="highlights-grid">
                    <div class="highlight-card analysis-card">
                        <div class="card-icon red">
                            <span class="material-icons">local_gas_station</span>
                        </div>
                        <div class="card-content">
                            <p class="card-label">Combustível Extra Total</p>
                            <p class="card-value" id="totalFuelDisplay">-</p>
                            <p class="card-sublabel">toneladas</p>
                        </div>
                    </div>
                    <div class="highlight-card analysis-card">
                        <div class="card-icon orange">
                            <span class="material-icons">attach_money</span>
                        </div>
                        <div class="card-content">
                            <p class="card-label">Custo Total (BRL)</p>
                            <p class="card-value" id="totalCostBRLDisplay">-</p>
                            <p class="card-sublabel" id="totalCostUSDDisplay">-</p>
                        </div>
                    </div>
                    <div class="highlight-card analysis-card">
                        <div class="card-icon green">
                            <span class="material-icons">cloud</span>
                        </div>
                        <div class="card-content">
                            <p class="card-label">Emissões de CO₂</p>
                            <p class="card-value" id="totalCO2Display">-</p>
                            <p class="card-sublabel">toneladas</p>
                        </div>
                    </div>
                    <div class="highlight-card analysis-card">
                        <div class="card-icon blue">
                            <span class="material-icons">speed</span>
                        </div>
                        <div class="card-content">
                            <p class="card-label">Aumento Médio de Potência</p>
                            <p class="card-value" id="avgPowerDisplay">-</p>
                            <p class="card-sublabel">percentual</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Visualizations Section -->
            <section class="detailed-section">
                <h2>Visualizações</h2>
                <div class="details-grid">
                    <!-- Timeline Chart -->
                    <div class="info-card chart-card chart-wide">
                        <h3>Evolução do Nível de Biofouling</h3>
                        <canvas id="timelineChart"></canvas>
                    </div>

                    <!-- Risk Distribution -->
                    <div class="info-card chart-card">
                        <h3>Distribuição de Risco</h3>
                        <canvas id="riskChart"></canvas>
                    </div>

                    <!-- Cost Bars -->
                    <div class="info-card chart-card">
                        <h3>Maiores Custos por Evento</h3>
                        <canvas id="costChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Detailed Events Table -->
            <section class="detailed-section detailed-events-section">
                <div class="section-header">
                    <h2>Eventos Detalhados</h2>
                    <div class="filter-controls">
                        <select id="riskFilter" class="time-filter">
                            <option value="all">Todos os riscos</option>
                            <option value="Critical">Crítico</option>
                            <option value="High">Alto</option>
                            <option value="Medium">Médio</option>
                            <option value="Low">Baixo</option>
                        </select>
                    </div>
                </div>
                <div class="info-card">
                    <div class="table-container">
                        <table class="analysis-table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Sessão</th>
                                    <th>Nível</th>
                                    <th>Risco</th>
                                    <th>Ação Recomendada</th>
                                    <th>Combustível (ton)</th>
                                    <th>Custo (BRL)</th>
                                    <th>CO₂ (ton)</th>
                                    <th>Confiança</th>
                                </tr>
                            </thead>
                            <tbody id="eventsTableBody">
                                <tr>
                                    <td colspan="9" style="text-align: center; padding: 40px;">
                                        <div class="loading-spinner" style="margin: 0 auto;"></div>
                                        <p style="margin-top: 10px; color: #4D4D4D;">Carregando dados...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="navios-integration.js"></script>
</body>

</html>